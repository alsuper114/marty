!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Marty=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({"./index.js":[function(require,module,exports){var create=require("./lib/create");var _=require("./lib/utils/tinydash");var Dispatcher=require("./lib/dispatcher");var Diagnostics=require("./lib/diagnostics");var ActionPayload=require("./lib/actionPayload");var ActionStore=require("./lib/stores/actionsStore");var Marty=_.extend({getAction:getAction,Diagnostics:Diagnostics,ActionPayload:ActionPayload,Dispatcher:Dispatcher.getCurrent(),Stores:{Actions:ActionStore}},create);function getAction(token){return ActionStore.getAction(token)}module.exports=Marty},{"./lib/actionPayload":2,"./lib/create":4,"./lib/diagnostics":5,"./lib/dispatcher":6,"./lib/stores/actionsStore":16,"./lib/utils/tinydash":19}],1:[function(require,module,exports){var uuid=require("./utils/uuid");var _=require("./utils/tinydash");var Dispatcher=require("./dispatcher");var ActionPayload=require("./actionPayload");var Actions=require("./internalConstants").Actions;function ActionCreators(options){var creator=this;var dispatcher=options.dispatcher||Dispatcher.getCurrent();options||(options={});this.getActionType=getActionType;_.extend.apply(_,[this,wrapFunctions(options)].concat(options.mixins));function getActionType(name){return name.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toUpperCase()}function wrapFunctions(functions){_.each(functions,function(func,name){var actionType;if(_.isFunction(func)){actionType=creator.getActionType(name)}else if(_.isArray(func)&&func.length===2&&_.isFunction(func[1])){actionType=func[0];func=func[1]}else{return}functions[name]=function(){var result;var token=uuid.small();dispatchStarting();try{result=func.apply(actionContext(),arguments);if(result){if(result instanceof Error){dispatchError(result)}else if(_.isFunction(result.then)){result.then(dispatchDone,dispatchError)}else{dispatchDone()}}else{dispatchDone()}}catch(e){dispatchError(e)}return token;function actionContext(){return _.extend({dispatch:function(){return dispatch({type:actionType,arguments:arguments})}},this)}function dispatchStarting(){dispatch({type:Actions.ACTION_STARTING,arguments:[{token:token,type:actionType}]})}function dispatchDone(){dispatch({type:Actions.ACTION_DONE,arguments:[token]})}function dispatchError(err){dispatch({type:Actions.ACTION_ERROR,arguments:[{token:token,error:err}]})}}});return functions}function dispatch(payload){var action=new ActionPayload(payload);dispatcher.dispatch(action);return action}}module.exports=ActionCreators},{"./actionPayload":2,"./dispatcher":6,"./internalConstants":12,"./utils/tinydash":19,"./utils/uuid":20}],2:[function(require,module,exports){var uuid=require("./utils/uuid");var _=require("./utils/tinydash");var cloneState=require("./utils/cloneState");var Statuses=require("./internalConstants").Statuses;function ActionPayload(options){options||(options={});var handlers=[];var rollbackHandlers=[];var status=Statuses.PENDING;this.type=options.type;this.token=uuid.small();this.source=options.source;this.creator=options.creator;this.arguments=_.toArray(options.arguments);this.toJSON=toJSON;this.toString=toString;this.rollback=rollback;this.addViewHandler=addViewHandler;this.addStoreHandler=addStoreHandler;this.addRollbackHandler=addRollbackHandler;Object.defineProperty(this,"handlers",{get:function(){return handlers}});Object.defineProperty(this,"status",{get:function(){return status}});Object.defineProperty(this,"pending",{get:function(){return status===Statuses.PENDING}});Object.defineProperty(this,"failed",{get:function(){return status===Statuses.FAILED}});Object.defineProperty(this,"done",{get:function(){return status===Statuses.DONE}});function toString(){return JSON.stringify(this.toJSON(),null,2)}function toJSON(){return{type:this.type,source:this.source,creator:this.creator,handlers:this.handlers,arguments:this.arguments}}function rollback(){_.each(rollbackHandlers,function(rollback){rollback()})}function addViewHandler(name,view,lastState){var storeHandler=handlers[handlers.length-1];var viewHandler={name:name,error:null,state:{after:null,before:lastState}};storeHandler.views.push(viewHandler);return{dispose:function(){viewHandler.state.after=cloneState(view.state)},failed:function(err){viewHandler.error=err}}}function addStoreHandler(store,handlerName){var handler={views:[],type:"Store",error:null,store:store.name,name:handlerName,state:{before:cloneState(store.getState()),after:undefined}};handlers.push(handler);return{dispose:function(){handler.state.after=cloneState(store.getState())},failed:function(err){handler.error=err}}}function addRollbackHandler(rollbackHandler,context){if(_.isFunction(rollbackHandler)){if(context){rollbackHandler=_.bind(rollbackHandler,context)}rollbackHandlers.push(rollbackHandler)}}}module.exports=ActionPayload},{"./internalConstants":12,"./utils/cloneState":17,"./utils/tinydash":19,"./utils/uuid":20}],3:[function(require,module,exports){var _=require("./utils/tinydash");function constants(obj){return toConstant(obj);function toConstant(obj){if(!obj){return{}}if(_.isArray(obj)){return arrayToConstants(obj)}if(_.isObject(obj)){return objectToConstants(obj)}}function objectToConstants(obj){return _.object(_.map(obj,valueToArray));function valueToArray(value,key){return[key,toConstant(value)]}}function arrayToConstants(array){return _.object(_.map(array,pair));function pair(key){return[key,key]}}}module.exports=constants},{"./utils/tinydash":19}],4:[function(require,module,exports){var Store=require("./store");var HttpAPI=require("./httpAPI");var constants=require("./constants");var Dispatcher=require("./dispatcher");var StateMixin=require("./mixins/stateMixin");var ActionCreators=require("./actionCreators");module.exports={createStore:createStore,createHttpAPI:createHttpAPI,createHTTPAPI:createHttpAPI,createConstants:createConstants,createStateMixin:createStateMixin,createActionCreators:createActionCreators};function createStore(options){return new Store(defaults(this,options))}function createHttpAPI(options){return new HttpAPI(defaults(this,options))}function createConstants(obj){return constants(obj)}function createActionCreators(options){return new ActionCreators(defaults(this,options))}function createStateMixin(options){return new StateMixin(defaults(this,options))}function defaults(marty,options){options||(options={});if(!options.dispatcher){options.dispatcher=Dispatcher.getCurrent()}return options}},{"./actionCreators":1,"./constants":3,"./dispatcher":6,"./httpAPI":11,"./mixins/stateMixin":14,"./store":15}],5:[function(require,module,exports){var ACTION_STARTED="action-started";var EventEmitter=require("events").EventEmitter;var diagnosticEvents=new EventEmitter;var diagnostics={log:log,trace:log,warn:warn,enabled:false,onAction:onAction,dispatchingAction:dispatchingAction};module.exports=diagnostics;function dispatchingAction(action){diagnosticEvents.emit(ACTION_STARTED,action)}function log(){if(diagnostics.enabled){console.log.apply(console,arguments)}}function warn(){if(diagnostics.enabled){console.warn.apply(console,arguments)}}function onAction(callback){diagnosticEvents.on(ACTION_STARTED,callback);return{dispose:function(){diagnosticEvents.removeListener(ACTION_STARTED,callback)}}}},{events:21}],6:[function(require,module,exports){var uuid=require("./utils/uuid");var Dispatcher=require("flux").Dispatcher;var instance=new Dispatcher;instance.id=uuid.small();Dispatcher.getCurrent=function(){return instance};module.exports=Dispatcher},{"./utils/uuid":20,flux:26}],7:[function(require,module,exports){function ActionHandlerNotFoundError(actionHandler,store){this.name="Action handler not found";this.message='The action handler "'+actionHandler+'" could not be found';if(store&&store.name){this.message+=" in the "+store.name+" store"}}ActionHandlerNotFoundError.prototype=Error.prototype;module.exports=ActionHandlerNotFoundError},{}],8:[function(require,module,exports){function ActionPredicateUndefinedError(actionHandler,store){this.name="Action predicate undefined";this.message='The action predicate for "'+actionHandler+'" was undefined';if(store&&store.name){this.message+=" in the "+store.name+" store"}}ActionPredicateUndefinedError.prototype=Error.prototype;module.exports=ActionPredicateUndefinedError},{}],9:[function(require,module,exports){function CompoundError(errors){this.errors=errors;this.name="Compound error"}CompoundError.prototype=Error.prototype;module.exports=CompoundError},{}],10:[function(require,module,exports){function NotFoundError(message){this.name="Not found";this.message=message||"";this.status=404}NotFoundError.prototype=Error.prototype;module.exports=NotFoundError},{}],11:[function(require,module,exports){var _=require("./utils/tinydash");var HttpMixin=require("./mixins/httpMixin");function HttpAPI(options){options||(options={});_.extend(this,options)}_.extend(HttpAPI.prototype,HttpMixin);module.exports=HttpAPI},{"./mixins/httpMixin":13,"./utils/tinydash":19}],12:[function(require,module,exports){var constants=require("./constants");module.exports=constants({ActionSources:["VIEW","SERVER"],Statuses:["PENDING","FAILED","DONE"],Actions:["ACTION_STARTING","ACTION_DONE","ACTION_ERROR"]})},{"./constants":3}],13:[function(require,module,exports){var _=require("../utils/tinydash");var http={request:require("reqwest")};var HttpMixin={get:function(){return this.request.apply(this,argumentsWithMethod(arguments,"GET"))},put:function(){return this.request.apply(this,argumentsWithMethod(arguments,"PUT"))},post:function(){return this.request.apply(this,argumentsWithMethod(arguments,"POST"))},"delete":function(){return this.request.apply(this,argumentsWithMethod(arguments,"DELETE"))},request:function(method,url){var options;if(_.isString(url)){options=_.extend({url:url})}else{options=url}options.method=method;options.type||(options.type="json");options.contentType||(options.contentType="application/json");if(options.contentType==="application/json"){options.processData=false;options.data=JSON.stringify(options.data)}return request(options,this.baseUrl)}};function argumentsWithMethod(args,method){args=_.toArray(args);args.unshift(method);return args}function request(options,baseUrl){if(baseUrl){var separator="";var firstCharOfUrl=options.url[0];var lastCharOfBaseUrl=baseUrl[baseUrl.length-1];if(lastCharOfBaseUrl!=="/"&&firstCharOfUrl!=="/"){separator="/"}else if(lastCharOfBaseUrl==="/"&&firstCharOfUrl==="/"){options.url=options.url.substring(1)}options.url=baseUrl+separator+options.url}return http.request(options)}module.exports=HttpMixin},{"../utils/tinydash":19,reqwest:81}],14:[function(require,module,exports){var uuid=require("../utils/uuid");var _=require("../utils/tinydash");var Diagnostics=require("../diagnostics");var cloneState=require("../utils/cloneState");var reservedKeys=["listenTo","getState","getInitialState","listenToActions"];function StateMixin(options){var config,instanceMethods;var listenToActions=shouldListenToActions(options);if(!options){throw new Error("The state mixin is expecting some options")}if(isStore(options)){config=storeMixinConfig(options)}else{config=simpleMixinConfig(options);instanceMethods=_.omit(options,reservedKeys)}var mixin=_.extend({onStoreChanged:function(state,store){Diagnostics.trace(store.name,"store has changed. The",this.name,"component ("+this._marty.id+") is updating");if(this._lifeCycleState==="UNMOUNTED"){Diagnostics.warn("Trying to set the state of ",this.name,"component ("+this._marty.id+") which is unmounted")}else{this.setState(this.tryGetState(store))}},onActionChanged:function(state,store,actionToken){var nextState=this.tryGetState(store);if(!nextState){return}if(isActionThatChanged(nextState)||_.any(_.map(nextState,isActionThatChanged))){this.setState(nextState)}function isActionThatChanged(action){return action&&action.token===actionToken}},tryGetState:function(store){var handler;if(Diagnostics.enabled&&store&&store.action){handler=store.action.addViewHandler(options.name,this,this._marty.lastState)}try{return this.getState()}catch(e){if(handler){handler.failed(e)}return{}}finally{if(handler){handler.dispose();this._marty.lastState=cloneState(this.state)}}},componentDidMount:function(){Diagnostics.trace("The",this.name,"component ("+this._marty.id+") has mounted.");var ActionsStore=require("../stores/actionsStore");this._marty.listeners=_.map(config.stores,function(store){Diagnostics.trace("The",this.name,"component  ("+this._marty.id+") is listening to the",store.name,"store");return store.addChangeListener(this.onStoreChanged)},this);if(listenToActions){this._marty.listeners.push(ActionsStore.addChangeListener(this.onActionChanged))}},componentWillReceiveProps:function(nextProps){var oldProps=this.props;this.props=nextProps;var newState=this.getState();this.props=oldProps;this.setState(newState)},componentWillUnmount:function(){Diagnostics.trace("The",this.name,"component ("+this._marty.id+") is unmounting.","It is listening to",this._marty.listeners.length,"stores");_.each(this._marty.listeners,function(listener){listener.dispose()});this._marty.listeners=[]},getState:function(){return config.getState(this)},getInitialState:function(){this.state={};this._marty={listeners:[],id:uuid.small(),lastState:undefined};if(options.getInitialState){this.state=options.getInitialState()}this.state=_.extend(this.state,this.getState());if(Diagnostics.enabled){this._marty.lastState=cloneState(this.state)}return this.state}},instanceMethods);return mixin;function storeMixinConfig(store){return{stores:[store],getState:function(){return store.getState()}}}function simpleMixinConfig(options){var stores=options.listenTo||[];var storesToGetStateFrom=findStoresToGetStateFrom(options);if(!_.isArray(stores)){stores=[stores]}if(!areStores(stores)){throw new Error("Can only listen to stores")}stores=stores.concat(_.values(storesToGetStateFrom));return{stores:stores,getState:getState};function getState(view){var state=_.object(_.map(storesToGetStateFrom,getStateFromStore));if(options.getState){state=_.extend(state,options.getState.call(view))}return state;function getStateFromStore(store,name){return[name,store.getState()]}}function findStoresToGetStateFrom(options){var storesToGetStateFrom={};_.each(options,function(value,key){if(reservedKeys.indexOf(key)===-1&&isStore(value)){storesToGetStateFrom[key]=value}});return storesToGetStateFrom}}function shouldListenToActions(options){return _.isUndefined(options.listenToActions)||!!options.listenToActions}function areStores(stores){for(var i=stores.length-1;i>=0;i--){if(!isStore(stores[i])){return false}}return true}function isStore(store){return store.getState&&store.addChangeListener}}module.exports=StateMixin},{"../diagnostics":5,"../stores/actionsStore":16,"../utils/cloneState":17,"../utils/tinydash":19,"../utils/uuid":20}],15:[function(require,module,exports){var CHANGE_EVENT="changed";var uuid=require("./utils/uuid");var _=require("./utils/tinydash");var Dispatcher=require("./dispatcher");var Diagnostics=require("./diagnostics");var NotFoundError=require("./errors/notFound");var EventEmitter=require("events").EventEmitter;var CompoundError=require("./errors/compoundError");var Statuses=require("./internalConstants").Statuses;var ActionHandlerNotFoundError=require("./errors/actionHandlerNotFound");var ActionPredicateUndefinedError=require("./errors/actionPredicateUndefined");Store.defaultMaxListeners=1e7;function Store(options){var state;var store=this;var failedFetches={};var defaultState={};var fetchInProgress={};var emitter=new EventEmitter;var dispatcher=options.dispatcher||Dispatcher.getCurrent();this.handlers={};this.fetch=fetch;this.clear=clear;this.dispose=dispose;this.waitFor=waitFor;this.id=uuid.small();this.setState=setState;this.getState=getState;this.hasChanged=hasChanged;this.handleAction=handleAction;this.getInitialState=getInitialState;this.addChangeListener=addChangeListener;fetch.done=fetchDone;fetch.failed=fetchFailed;fetch.pending=fetchPending;emitter.setMaxListeners(options.maxListeners||Store.defaultMaxListeners);extendStore(this,options);validateHandlers(this);this.dispatchToken=dispatcher.register(_.bind(this.handleAction,this));state=this.getInitialState();if(_.isNull(state)||_.isUndefined(state)){state=defaultState}Object.defineProperty(this,"state",{get:function(){return getState()},set:function(value){this.setState(value)}});function validateHandlers(store){_.each(store.handlers,function(actionPredicate,handlerName){var actionHandler=store[handlerName];if(_.isUndefined(actionHandler)||_.isNull(actionHandler)){throw new ActionHandlerNotFoundError(handlerName,store)}if(!actionPredicate){throw new ActionPredicateUndefinedError(handlerName,store)}})}function extendStore(store,options){var handlers=_.map(options.mixins,function(mixin){return mixin.handlers});var mixins=_.map(options.mixins,function(mixin){return _.omit(mixin,"handlers")});_.extend.apply(_,[store,options].concat(mixins));_.extend.apply(_,[store.handlers].concat(handlers))}function getInitialState(){return defaultState}function dispose(){emitter.removeAllListeners(CHANGE_EVENT);this.clear()}function fetch(id,local,remote){var options,result,error,cacheError;if(_.isObject(id)){options=id}else{options={id:id,locally:local,remotely:remote}}if(!options||!options.id){throw new Error("must specify an id")}result=dependencyResult(options);if(result){return result}cacheError=_.isUndefined(options.cacheError)||options.cacheError;if(cacheError){error=failedFetches[options.id];if(error){return fetch.failed(error)}}if(fetchInProgress[options.id]){return fetch.pending()}return tryAndGetLocally()||tryAndGetRemotely();function tryAndGetLocally(){try{var result=options.locally.call(store);if(result){return fetch.done(result)}}catch(error){failedFetches[options.id]=error;return fetch.failed(error)}}function tryAndGetRemotely(){try{result=options.remotely.call(store);if(result){if(_.isFunction(result.then)){fetchInProgress[options.id]=true;result.then(function(){result=tryAndGetLocally();if(result){fetchFinished();hasChanged()}else{failed(new NotFoundError);hasChanged()}}).catch(function(error){failed(error);hasChanged()});return fetch.pending()}else{result=tryAndGetLocally();if(result){return result}}}return failed(new NotFoundError)}catch(error){return failed(error)}}function fetchFinished(){delete fetchInProgress[options.id]}function failed(error){if(cacheError){failedFetches[options.id]=error}return fetch.failed(error)}}function dependencyResult(options){if(options.dependsOn){if(_.isArray(options.dependsOn)){var pending=false;var dependencyErrors=[];for(var i=0;i<options.dependsOn.length;i++){var dependency=options.dependsOn[i];switch(dependency.status){case Statuses.PENDING:pending=true;break;case Statuses.FAILED:dependencyErrors.push(dependency.error);break}}if(dependencyErrors.length){return fetch.failed(new CompoundError(dependencyErrors))}if(pending){return fetch.pending()}}else{if(!options.dependsOn.done){return options.dependsOn}}}}function fetchPending(){return fetchResult({pending:true,status:"PENDING"})}function fetchFailed(error){return fetchResult({error:error,failed:true,status:"FAILED"})}function fetchDone(result){return fetchResult({done:true,status:"DONE",result:result})}function fetchResult(result){result.when=when;return result}function when(handlers){handlers||(handlers={});var status=this.status;var handler=handlers[status.toLowerCase()];if(!handler){throw new Error("Could not find a "+status+" handler")}switch(status){case Statuses.PENDING:return handler();case Statuses.FAILED:return handler(this.error);case Statuses.DONE:return handler(this.result)}}function clear(){failedFetches={};fetchInProgress={};this.state=this.getInitialState()}function setState(newState){if(state!==newState){state=newState;this.hasChanged(state)}}function getState(){return state}function addChangeListener(callback,context){if(context){callback=_.bind(callback,context)}Diagnostics.trace("The",store.name,"store ("+store.id+") is adding a change listener");emitter.on(CHANGE_EVENT,callback);return{dispose:function(){Diagnostics.trace("The",store.name,"store ("+store.id+") is disposing of a change listener");emitter.removeListener(CHANGE_EVENT,callback)}}}function hasChanged(eventArgs){emitter.emit.call(emitter,CHANGE_EVENT,this.state,this,eventArgs)}function handleAction(action){var handlers=_.object(_.map(this.handlers,getHandlerWithPredicates));_.each(handlers,function(predicates,handlerName){_.each(predicates,function(predicate){if(predicate(action)){var rollbackHandler,actionHandler;var handler=action.addStoreHandler(this,handlerName,predicate.toJSON());try{this.action=action;actionHandler=this[handlerName];if(actionHandler){rollbackHandler=actionHandler.apply(this,action.arguments)}else{throw new ActionHandlerNotFoundError(handlerName,this)}}catch(e){handler.failed(e);throw e}finally{this.action=null;action.addRollbackHandler(rollbackHandler,this);if(handler){handler.dispose()}}}},this)},this);function getHandlerWithPredicates(actionPredicates,handler){_.isArray(actionPredicates)||(actionPredicates=[actionPredicates]);var predicates=_.map(actionPredicates,toFunc);return[handler,predicates];function toFunc(actionPredicate){if(_.isString(actionPredicate)){actionPredicate={type:actionPredicate}}var func=_.createCallback(actionPredicate);func.toJSON=function(){return actionPredicate};return func}}}function waitFor(stores){if(!_.isArray(stores)){stores=_.toArray(arguments)}dispatcher.waitFor(dispatchTokens(stores));function dispatchTokens(stores){var tokens=[];_.each(stores,function(store){if(store.dispatchToken){tokens.push(store.dispatchToken)}if(_.isString(store)){tokens.push(store)}});return tokens}}}module.exports=Store},{"./diagnostics":5,"./dispatcher":6,"./errors/actionHandlerNotFound":7,"./errors/actionPredicateUndefined":8,"./errors/compoundError":9,"./errors/notFound":10,"./internalConstants":12,"./utils/tinydash":19,"./utils/uuid":20,events:21}],16:[function(require,module,exports){var Store=require("../store");var Statuses=require("../internalConstants").Statuses;var ActionConstants=require("../internalConstants").Actions;var ActionsStore=new Store({name:"Actions",handlers:{actionDone:ActionConstants.ACTION_DONE,actionError:ActionConstants.ACTION_ERROR,actionStarting:ActionConstants.ACTION_STARTING},getState:function(){return{}},actionStarting:function(action){this.state[action.token]={type:action.type,token:action.token,status:Statuses.PENDING,arguments:action.arguments};this.hasChanged(action.token)},actionError:function(actionToken,error){var action=this.state[actionToken];if(action){action.status=Statuses.FAILED;action.error=error;action.done=true;this.hasChanged(actionToken)}},actionDone:function(actionToken){var action=this.state[actionToken];if(action){action.status=Statuses.DONE;action.done=true;this.hasChanged(actionToken)}},getAction:function(actionToken){return this.state[actionToken]}});module.exports=ActionsStore},{"../internalConstants":12,"../store":15}],17:[function(require,module,exports){var _=require("./tinydash");var isImmutable=require("./isImmutable");function cloneState(state){if(isImmutable(state)){return state}return _.cloneDeep(state)}module.exports=cloneState},{"./isImmutable":18,"./tinydash":19}],18:[function(require,module,exports){function isImmutable(){return false}module.exports=isImmutable},{}],19:[function(require,module,exports){module.exports={omit:require("lodash-node/modern/objects/omit"),extend:require("lodash-node/modern/objects/assign"),object:require("lodash-node/modern/arrays/zipObject"),values:require("lodash-node/modern/objects/values"),isNull:require("lodash-node/modern/objects/isNull"),isArray:require("lodash-node/modern/objects/isArray"),isString:require("lodash-node/modern/objects/isString"),isObject:require("lodash-node/modern/objects/isObject"),cloneDeep:require("lodash-node/modern/objects/cloneDeep"),isFunction:require("lodash-node/modern/objects/isFunction"),isUndefined:require("lodash-node/modern/objects/isUndefined"),map:require("lodash-node/modern/collections/map"),any:require("lodash-node/modern/collections/some"),each:require("lodash-node/modern/collections/forEach"),toArray:require("lodash-node/modern/collections/toArray"),bind:require("lodash-node/modern/functions/bind"),createCallback:require("lodash-node/modern/functions/createCallback")}},{"lodash-node/modern/arrays/zipObject":29,"lodash-node/modern/collections/forEach":30,"lodash-node/modern/collections/map":31,"lodash-node/modern/collections/some":32,"lodash-node/modern/collections/toArray":33,"lodash-node/modern/functions/bind":34,"lodash-node/modern/functions/createCallback":35,"lodash-node/modern/objects/assign":63,"lodash-node/modern/objects/cloneDeep":64,"lodash-node/modern/objects/isArray":68,"lodash-node/modern/objects/isFunction":69,"lodash-node/modern/objects/isNull":70,"lodash-node/modern/objects/isObject":71,"lodash-node/modern/objects/isString":72,"lodash-node/modern/objects/isUndefined":73,"lodash-node/modern/objects/omit":75,"lodash-node/modern/objects/values":76}],20:[function(require,module,exports){var format=require("util").format;function uuid(){return format("%s%s-%s-%s-%s-%s%s%s",s4(),s4(),s4(),s4(),s4(),s4(),s4(),s4())}function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}module.exports={generate:uuid,small:function(){return uuid().substring(0,6)}}},{util:25}],21:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],22:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],23:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)
}}();process.title="browser";process.browser=true;process.env={};process.argv=[];function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],24:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],25:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":24,_process:23,inherits:22}],26:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":27}],27:[function(require,module,exports){"use strict";var invariant=require("./invariant");var _lastID=1;var _prefix="ID_";function Dispatcher(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;this.$Dispatcher_callbacks[id]=callback;return id};Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id);delete this.$Dispatcher_callbacks[id]};Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];if(this.$Dispatcher_isPending[id]){invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while "+"waiting for `%s`.",id);continue}invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id);this.$Dispatcher_invokeCallback(id)}};Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[id]){continue}this.$Dispatcher_invokeCallback(id)}}finally{this.$Dispatcher_stopDispatching()}};Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=true;this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[id]=true};Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[id]=false;this.$Dispatcher_isHandled[id]=false}this.$Dispatcher_pendingPayload=payload;this.$Dispatcher_isDispatching=true};Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};module.exports=Dispatcher},{"./invariant":28}],28:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(false){if(format===undefined){throw new Error("invariant requires an error message argument")}}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}error.framesToPop=1;throw error}};module.exports=invariant},{}],29:[function(require,module,exports){var isArray=require("../objects/isArray");function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};if(!values&&length&&!isArray(keys[0])){values=[]}while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}module.exports=zipObject},{"../objects/isArray":68}],30:[function(require,module,exports){var baseCreateCallback=require("../internals/baseCreateCallback"),forOwn=require("../objects/forOwn");function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}module.exports=forEach},{"../internals/baseCreateCallback":40,"../objects/forOwn":66}],31:[function(require,module,exports){var createCallback=require("../functions/createCallback"),forOwn=require("../objects/forOwn");function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=createCallback(callback,thisArg,3);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}module.exports=map},{"../functions/createCallback":35,"../objects/forOwn":66}],32:[function(require,module,exports){var createCallback=require("../functions/createCallback"),forOwn=require("../objects/forOwn"),isArray=require("../objects/isArray");function some(collection,callback,thisArg){var result;callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}module.exports=some},{"../functions/createCallback":35,"../objects/forOwn":66,"../objects/isArray":68}],33:[function(require,module,exports){var isString=require("../objects/isString"),slice=require("../internals/slice"),values=require("../objects/values");function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}module.exports=toArray},{"../internals/slice":62,"../objects/isString":72,"../objects/values":76}],34:[function(require,module,exports){var createWrapper=require("../internals/createWrapper"),slice=require("../internals/slice");function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}module.exports=bind},{"../internals/createWrapper":49,"../internals/slice":62}],35:[function(require,module,exports){var baseCreateCallback=require("../internals/baseCreateCallback"),baseIsEqual=require("../internals/baseIsEqual"),isObject=require("../objects/isObject"),keys=require("../objects/keys"),property=require("../utilities/property");function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=="function"){return baseCreateCallback(func,thisArg,argCount)}if(type!="object"){return property(func)}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||1/a==1/b)}}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break}}return result}}module.exports=createCallback},{"../internals/baseCreateCallback":40,"../internals/baseIsEqual":45,"../objects/isObject":71,"../objects/keys":74,"../utilities/property":80}],36:[function(require,module,exports){var arrayPool=[];module.exports=arrayPool},{}],37:[function(require,module,exports){var baseCreate=require("./baseCreate"),isObject=require("../objects/isObject"),setBindData=require("./setBindData"),slice=require("./slice");var arrayRef=[];var push=arrayRef.push;function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}setBindData(bound,bindData);return bound}module.exports=baseBind},{"../objects/isObject":71,"./baseCreate":39,"./setBindData":60,"./slice":62}],38:[function(require,module,exports){var assign=require("../objects/assign"),forEach=require("../collections/forEach"),forOwn=require("../objects/forOwn"),getArray=require("./getArray"),isArray=require("../objects/isArray"),isObject=require("../objects/isObject"),releaseArray=require("./releaseArray"),slice=require("./slice");var reFlags=/\w*$/;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var objectProto=Object.prototype;var toString=objectProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if(typeof result!="undefined"){return result}}var isObj=isObject(value);if(isObj){var className=toString.call(value);if(!cloneableClasses[className]){return value}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:result=ctor(value.source,reFlags.exec(value));result.lastIndex=value.lastIndex;return result}}else{return value}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(value.length):{}}else{result=isArr?slice(value):assign({},value)}if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}if(!isDeep){return result}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)});if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}module.exports=baseClone},{"../collections/forEach":30,"../objects/assign":63,"../objects/forOwn":66,"../objects/isArray":68,"../objects/isObject":71,"./getArray":50,"./releaseArray":58,"./slice":62}],39:[function(require,module,exports){(function(global){var isNative=require("./isNative"),isObject=require("../objects/isObject"),noop=require("../utilities/noop");var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate;function baseCreate(prototype,properties){return isObject(prototype)?nativeCreate(prototype):{}}if(!nativeCreate){baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||global.Object()}}()}module.exports=baseCreate}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../objects/isObject":71,"../utilities/noop":79,"./isNative":52}],40:[function(require,module,exports){var bind=require("../functions/bind"),identity=require("../utilities/identity"),setBindData=require("./setBindData"),support=require("../support");var reFuncName=/^\s*function[ \n\r\t]+\w/;var reThis=/\bthis\b/;var fnToString=Function.prototype.toString;function baseCreateCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"||!("prototype"in func)){return func}var bindData=func.__bindData__;if(typeof bindData=="undefined"){if(support.funcNames){bindData=!func.name}bindData=bindData||!support.funcDecomp;if(!bindData){var source=fnToString.call(func);if(!support.funcNames){bindData=!reFuncName.test(source)}if(!bindData){bindData=reThis.test(source);setBindData(func,bindData)}}}if(bindData===false||bindData!==true&&bindData[1]&1){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}module.exports=baseCreateCallback},{"../functions/bind":34,"../support":77,"../utilities/identity":78,"./setBindData":60}],41:[function(require,module,exports){var baseCreate=require("./baseCreate"),isObject=require("../objects/isObject"),setBindData=require("./setBindData"),slice=require("./slice");var arrayRef=[];var push=arrayRef.push;function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs)}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,isCurryBound?bitmask:bitmask&~3,args,null,thisArg,arity])}}args||(args=arguments);if(isBindKey){func=thisBinding[key]}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}setBindData(bound,bindData);return bound}module.exports=baseCreateWrapper},{"../objects/isObject":71,"./baseCreate":39,"./setBindData":60,"./slice":62}],42:[function(require,module,exports){var baseIndexOf=require("./baseIndexOf"),cacheIndexOf=require("./cacheIndexOf"),createCache=require("./createCache"),largeArraySize=require("./largeArraySize"),releaseObject=require("./releaseObject");function baseDifference(array,values){var index=-1,indexOf=baseIndexOf,length=array?array.length:0,isLarge=length>=largeArraySize,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value)}}if(isLarge){releaseObject(values)}return result}module.exports=baseDifference},{"./baseIndexOf":44,"./cacheIndexOf":46,"./createCache":48,"./largeArraySize":54,"./releaseObject":59}],43:[function(require,module,exports){var isArguments=require("../objects/isArguments"),isArray=require("../objects/isArray");function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=="object"&&typeof value.length=="number"&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict)}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex]}}else if(!isStrict){result.push(value)}}return result}module.exports=baseFlatten},{"../objects/isArguments":67,"../objects/isArray":68}],44:[function(require,module,exports){function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index}}return-1}module.exports=baseIndexOf},{}],45:[function(require,module,exports){var forIn=require("../objects/forIn"),getArray=require("./getArray"),isFunction=require("../objects/isFunction"),objectTypes=require("./objectTypes"),releaseArray=require("./releaseArray");var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var objectProto=Object.prototype;var toString=objectProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&("constructor"in a&&"constructor"in b)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)){break}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}module.exports=baseIsEqual},{"../objects/forIn":65,"../objects/isFunction":69,"./getArray":50,"./objectTypes":57,"./releaseArray":58}],46:[function(require,module,exports){var baseIndexOf=require("./baseIndexOf"),keyPrefix=require("./keyPrefix");function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]?0:-1}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=="object"?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}module.exports=cacheIndexOf},{"./baseIndexOf":44,"./keyPrefix":53}],47:[function(require,module,exports){var keyPrefix=require("./keyPrefix");function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){(typeCache[key]||(typeCache[key]=[])).push(value)}else{typeCache[key]=true}}}module.exports=cachePush},{"./keyPrefix":53}],48:[function(require,module,exports){var cachePush=require("./cachePush"),getObject=require("./getObject"),releaseObject=require("./releaseObject");function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&typeof first=="object"&&mid&&typeof mid=="object"&&last&&typeof last=="object"){return false}var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return result}module.exports=createCache},{"./cachePush":47,"./getObject":51,"./releaseObject":59}],49:[function(require,module,exports){var baseBind=require("./baseBind"),baseCreateWrapper=require("./baseCreateWrapper"),isFunction=require("../objects/isFunction"),slice=require("./slice");var arrayRef=[];var push=arrayRef.push,unshift=arrayRef.unshift;function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false}var bindData=func&&func.__bindData__;if(bindData&&bindData!==true){bindData=slice(bindData);if(bindData[2]){bindData[2]=slice(bindData[2])}if(bindData[3]){bindData[3]=slice(bindData[3])}if(isBind&&!(bindData[1]&1)){bindData[4]=thisArg}if(!isBind&&bindData[1]&1){bitmask|=8}if(isCurry&&!(bindData[1]&4)){bindData[5]=arity}if(isPartial){push.apply(bindData[2]||(bindData[2]=[]),partialArgs)}if(isPartialRight){unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs)}bindData[1]|=bitmask;return createWrapper.apply(null,bindData)}var creater=bitmask==1||bitmask===17?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}module.exports=createWrapper},{"../objects/isFunction":69,"./baseBind":37,"./baseCreateWrapper":41,"./slice":62}],50:[function(require,module,exports){var arrayPool=require("./arrayPool");function getArray(){return arrayPool.pop()||[]}module.exports=getArray},{"./arrayPool":36}],51:[function(require,module,exports){var objectPool=require("./objectPool");function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}module.exports=getObject},{"./objectPool":56}],52:[function(require,module,exports){var objectProto=Object.prototype;
var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function isNative(value){return typeof value=="function"&&reNative.test(value)}module.exports=isNative},{}],53:[function(require,module,exports){var keyPrefix=+new Date+"";module.exports=keyPrefix},{}],54:[function(require,module,exports){var largeArraySize=75;module.exports=largeArraySize},{}],55:[function(require,module,exports){var maxPoolSize=40;module.exports=maxPoolSize},{}],56:[function(require,module,exports){var objectPool=[];module.exports=objectPool},{}],57:[function(require,module,exports){var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};module.exports=objectTypes},{}],58:[function(require,module,exports){var arrayPool=require("./arrayPool"),maxPoolSize=require("./maxPoolSize");function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}module.exports=releaseArray},{"./arrayPool":36,"./maxPoolSize":55}],59:[function(require,module,exports){var maxPoolSize=require("./maxPoolSize"),objectPool=require("./objectPool");function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}module.exports=releaseObject},{"./maxPoolSize":55,"./objectPool":56}],60:[function(require,module,exports){var isNative=require("./isNative"),noop=require("../utilities/noop");var descriptor={configurable:false,enumerable:false,value:null,writable:false};var defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}();var setBindData=!defineProperty?noop:function(func,value){descriptor.value=value;defineProperty(func,"__bindData__",descriptor)};module.exports=setBindData},{"../utilities/noop":79,"./isNative":52}],61:[function(require,module,exports){var objectTypes=require("./objectTypes");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};module.exports=shimKeys},{"./objectTypes":57}],62:[function(require,module,exports){function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}module.exports=slice},{}],63:[function(require,module,exports){var baseCreateCallback=require("../internals/baseCreateCallback"),keys=require("./keys"),objectTypes=require("../internals/objectTypes");var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}return result};module.exports=assign},{"../internals/baseCreateCallback":40,"../internals/objectTypes":57,"./keys":74}],64:[function(require,module,exports){var baseClone=require("../internals/baseClone"),baseCreateCallback=require("../internals/baseCreateCallback");function cloneDeep(value,callback,thisArg){return baseClone(value,true,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}module.exports=cloneDeep},{"../internals/baseClone":38,"../internals/baseCreateCallback":40}],65:[function(require,module,exports){var baseCreateCallback=require("../internals/baseCreateCallback"),objectTypes=require("../internals/objectTypes");var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};module.exports=forIn},{"../internals/baseCreateCallback":40,"../internals/objectTypes":57}],66:[function(require,module,exports){var baseCreateCallback=require("../internals/baseCreateCallback"),keys=require("./keys"),objectTypes=require("../internals/objectTypes");var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};module.exports=forOwn},{"../internals/baseCreateCallback":40,"../internals/objectTypes":57,"./keys":74}],67:[function(require,module,exports){var argsClass="[object Arguments]";var objectProto=Object.prototype;var toString=objectProto.toString;function isArguments(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==argsClass||false}module.exports=isArguments},{}],68:[function(require,module,exports){var isNative=require("../internals/isNative");var arrayClass="[object Array]";var objectProto=Object.prototype;var toString=objectProto.toString;var nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray;var isArray=nativeIsArray||function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==arrayClass||false};module.exports=isArray},{"../internals/isNative":52}],69:[function(require,module,exports){function isFunction(value){return typeof value=="function"}module.exports=isFunction},{}],70:[function(require,module,exports){function isNull(value){return value===null}module.exports=isNull},{}],71:[function(require,module,exports){var objectTypes=require("../internals/objectTypes");function isObject(value){return!!(value&&objectTypes[typeof value])}module.exports=isObject},{"../internals/objectTypes":57}],72:[function(require,module,exports){var stringClass="[object String]";var objectProto=Object.prototype;var toString=objectProto.toString;function isString(value){return typeof value=="string"||value&&typeof value=="object"&&toString.call(value)==stringClass||false}module.exports=isString},{}],73:[function(require,module,exports){function isUndefined(value){return typeof value=="undefined"}module.exports=isUndefined},{}],74:[function(require,module,exports){var isNative=require("../internals/isNative"),isObject=require("./isObject"),shimKeys=require("../internals/shimKeys");var nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys;var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};module.exports=keys},{"../internals/isNative":52,"../internals/shimKeys":61,"./isObject":71}],75:[function(require,module,exports){var baseDifference=require("../internals/baseDifference"),baseFlatten=require("../internals/baseFlatten"),createCallback=require("../functions/createCallback"),forIn=require("./forIn");function omit(object,callback,thisArg){var result={};if(typeof callback!="function"){var props=[];forIn(object,function(value,key){props.push(key)});props=baseDifference(props,baseFlatten(arguments,true,false,1));var index=-1,length=props.length;while(++index<length){var key=props[index];result[key]=object[key]}}else{callback=createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(!callback(value,key,object)){result[key]=value}})}return result}module.exports=omit},{"../functions/createCallback":35,"../internals/baseDifference":42,"../internals/baseFlatten":43,"./forIn":65}],76:[function(require,module,exports){var keys=require("./keys");function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}module.exports=values},{"./keys":74}],77:[function(require,module,exports){(function(global){var isNative=require("./internals/isNative");var reThis=/\bthis\b/;var support={};support.funcDecomp=!isNative(global.WinRTError)&&reThis.test(function(){return this});support.funcNames=typeof Function.name=="string";module.exports=support}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./internals/isNative":52}],78:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],79:[function(require,module,exports){function noop(){}module.exports=noop},{}],80:[function(require,module,exports){function property(key){return function(object){return object[key]}}module.exports=property},{}],81:[function(require,module,exports){!function(name,context,definition){if(typeof module!="undefined"&&module.exports)module.exports=definition();else if(typeof define=="function"&&define.amd)define(definition);else context[name]=definition()}("reqwest",this,function(){var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(o){if(o["crossOrigin"]===true){var xhr=win[xmlHttpRequest]?new XMLHttpRequest:null;if(xhr&&"withCredentials"in xhr){return xhr}else if(win[xDomainRequest]){return new XDomainRequest}else{throw new Error("Browser does not support cross-origin requests")}}else if(win[xmlHttpRequest]){return new XMLHttpRequest}else{return new ActiveXObject("Microsoft.XMLHTTP")}},globalSetupOptions={dataFilter:function(data){return data}};function succeed(r){var protocol=protocolRe.exec(r.url);protocol=protocol&&protocol[1]||window.location.protocol;return httpsRe.test(protocol)?twoHundo.test(r.request.status):!!r.request.response}function handleReadyState(r,success,error){return function(){if(r._aborted)return error(r.request);if(r._timedOut)return error(r.request,"Request is aborted: timeout");if(r.request&&r.request[readyState]==4){r.request.onreadystatechange=noop;if(succeed(r))success(r.request);else error(r.request)}}}function setHeaders(http,o){var headers=o["headers"]||{},h;headers["Accept"]=headers["Accept"]||defaultHeaders["accept"][o["type"]]||defaultHeaders["accept"]["*"];var isAFormData=typeof FormData==="function"&&o["data"]instanceof FormData;if(!o["crossOrigin"]&&!headers[requestedWith])headers[requestedWith]=defaultHeaders["requestedWith"];if(!headers[contentType]&&!isAFormData)headers[contentType]=o["contentType"]||defaultHeaders["contentType"];for(h in headers)headers.hasOwnProperty(h)&&"setRequestHeader"in http&&http.setRequestHeader(h,headers[h])}function setCredentials(http,o){if(typeof o["withCredentials"]!=="undefined"&&typeof http.withCredentials!=="undefined"){http.withCredentials=!!o["withCredentials"]}}function generalCallback(data){lastValue=data}function urlappend(url,s){return url+(/\?/.test(url)?"&":"?")+s}function handleJsonp(o,fn,err,url){var reqId=uniqid++,cbkey=o["jsonpCallback"]||"callback",cbval=o["jsonpCallbackName"]||reqwest.getcallbackPrefix(reqId),cbreg=new RegExp("((^|\\?|&)"+cbkey+")=([^&]+)"),match=url.match(cbreg),script=doc.createElement("script"),loaded=0,isIE10=navigator.userAgent.indexOf("MSIE 10.0")!==-1;if(match){if(match[3]==="?"){url=url.replace(cbreg,"$1="+cbval)}else{cbval=match[3]}}else{url=urlappend(url,cbkey+"="+cbval)}win[cbval]=generalCallback;script.type="text/javascript";script.src=url;script.async=true;if(typeof script.onreadystatechange!=="undefined"&&!isIE10){script.htmlFor=script.id="_reqwest_"+reqId}script.onload=script.onreadystatechange=function(){if(script[readyState]&&script[readyState]!=="complete"&&script[readyState]!=="loaded"||loaded){return false}script.onload=script.onreadystatechange=null;script.onclick&&script.onclick();fn(lastValue);lastValue=undefined;head.removeChild(script);loaded=1};head.appendChild(script);return{abort:function(){script.onload=script.onreadystatechange=null;err({},"Request is aborted: timeout",{});lastValue=undefined;head.removeChild(script);loaded=1}}}function getRequest(fn,err){var o=this.o,method=(o["method"]||"GET").toUpperCase(),url=typeof o==="string"?o:o["url"],data=o["processData"]!==false&&o["data"]&&typeof o["data"]!=="string"?reqwest.toQueryString(o["data"]):o["data"]||null,http,sendWait=false;if((o["type"]=="jsonp"||method=="GET")&&data){url=urlappend(url,data);data=null}if(o["type"]=="jsonp")return handleJsonp(o,fn,err,url);http=o.xhr&&o.xhr(o)||xhr(o);http.open(method,url,o["async"]===false?false:true);setHeaders(http,o);setCredentials(http,o);if(win[xDomainRequest]&&http instanceof win[xDomainRequest]){http.onload=fn;http.onerror=err;http.onprogress=function(){};sendWait=true}else{http.onreadystatechange=handleReadyState(this,fn,err)}o["before"]&&o["before"](http);if(sendWait){setTimeout(function(){http.send(data)},200)}else{http.send(data)}return http}function Reqwest(o,fn){this.o=o;this.fn=fn;init.apply(this,arguments)}function setType(header){if(header.match("json"))return"json";if(header.match("javascript"))return"js";if(header.match("text"))return"html";if(header.match("xml"))return"xml"}function init(o,fn){this.url=typeof o=="string"?o:o["url"];this.timeout=null;this._fulfilled=false;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=false;this._responseArgs={};var self=this;fn=fn||function(){};if(o["timeout"]){this.timeout=setTimeout(function(){timedOut()},o["timeout"])}if(o["success"]){this._successHandler=function(){o["success"].apply(o,arguments)}}if(o["error"]){this._errorHandlers.push(function(){o["error"].apply(o,arguments)})}if(o["complete"]){this._completeHandlers.push(function(){o["complete"].apply(o,arguments)})}function complete(resp){o["timeout"]&&clearTimeout(self.timeout);self.timeout=null;while(self._completeHandlers.length>0){self._completeHandlers.shift()(resp)}}function success(resp){var type=o["type"]||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r){switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}}self._responseArgs.resp=resp;self._fulfilled=true;fn(resp);self._successHandler(resp);while(self._fulfillmentHandlers.length>0){resp=self._fulfillmentHandlers.shift()(resp)}complete(resp)}function timedOut(){self._timedOut=true;self.request.abort()}function error(resp,msg,t){resp=self.request;self._responseArgs.resp=resp;self._responseArgs.msg=msg;self._responseArgs.t=t;self._erred=true;while(self._errorHandlers.length>0){self._errorHandlers.shift()(resp,msg,t)}complete(resp)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=true;this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(success,fail){success=success||function(){};fail=fail||function(){};if(this._fulfilled){this._responseArgs.resp=success(this._responseArgs.resp)}else if(this._erred){fail(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._fulfillmentHandlers.push(success);this._errorHandlers.push(fail)}return this},always:function(fn){if(this._fulfilled||this._erred){fn(this._responseArgs.resp)}else{this._completeHandlers.push(fn)}return this},fail:function(fn){if(this._erred){fn(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._errorHandlers.push(fn)}return this},"catch":function(fn){return this.fail(fn)}};function reqwest(o,fn){return new Reqwest(o,fn)}function normalize(s){return s?s.replace(/\r?\n/g,"\r\n"):""}function serial(el,cb){var n=el.name,t=el.tagName.toLowerCase(),optCb=function(o){if(o&&!o["disabled"])cb(n,normalize(o["attributes"]["value"]&&o["attributes"]["value"]["specified"]?o["value"]:o["text"]))},ch,ra,val,i;if(el.disabled||!n)return;switch(t){case"input":if(!/reset|button|image|file/i.test(el.type)){ch=/checkbox/i.test(el.type);ra=/radio/i.test(el.type);val=el.value;(!(ch||ra)||el.checked)&&cb(n,normalize(ch&&val===""?"on":val))}break;case"textarea":cb(n,normalize(el.value));break;case"select":if(el.type.toLowerCase()==="select-one"){optCb(el.selectedIndex>=0?el.options[el.selectedIndex]:null)}else{for(i=0;el.length&&i<el.length;i++){el.options[i].selected&&optCb(el.options[i])}}break}}function eachFormElement(){var cb=this,e,i,serializeSubtags=function(e,tags){var i,j,fa;for(i=0;i<tags.length;i++){fa=e[byTag](tags[i]);for(j=0;j<fa.length;j++)serial(fa[j],cb)}};for(i=0;i<arguments.length;i++){e=arguments[i];if(/input|select|textarea/i.test(e.tagName))serial(e,cb);serializeSubtags(e,["input","select","textarea"])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var hash={};eachFormElement.apply(function(name,value){if(name in hash){hash[name]&&!isArray(hash[name])&&(hash[name]=[hash[name]]);hash[name].push(value)}else hash[name]=value},arguments);return hash}reqwest.serializeArray=function(){var arr=[];eachFormElement.apply(function(name,value){arr.push({name:name,value:value})},arguments);return arr};reqwest.serialize=function(){if(arguments.length===0)return"";var opt,fn,args=Array.prototype.slice.call(arguments,0);opt=args.pop();opt&&opt.nodeType&&args.push(opt)&&(opt=null);opt&&(opt=opt.type);if(opt=="map")fn=serializeHash;else if(opt=="array")fn=reqwest.serializeArray;else fn=serializeQueryString;return fn.apply(null,args)};reqwest.toQueryString=function(o,trad){var prefix,i,traditional=trad||false,s=[],enc=encodeURIComponent,add=function(key,value){value="function"===typeof value?value():value==null?"":value;s[s.length]=enc(key)+"="+enc(value)};if(isArray(o)){for(i=0;o&&i<o.length;i++)add(o[i]["name"],o[i]["value"])}else{for(prefix in o){if(o.hasOwnProperty(prefix))buildParams(prefix,o[prefix],traditional,add)}}return s.join("&").replace(/%20/g,"+")};function buildParams(prefix,obj,traditional,add){var name,i,v,rbracket=/\[\]$/;if(isArray(obj)){for(i=0;obj&&i<obj.length;i++){v=obj[i];if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}}}else if(obj&&obj.toString()==="[object Object]"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}reqwest.getcallbackPrefix=function(){return callbackPrefix};reqwest.compat=function(o,fn){if(o){o["type"]&&(o["method"]=o["type"])&&delete o["type"];o["dataType"]&&(o["type"]=o["dataType"]);o["jsonpCallback"]&&(o["jsonpCallbackName"]=o["jsonpCallback"])&&delete o["jsonpCallback"];o["jsonp"]&&(o["jsonpCallback"]=o["jsonp"])}return new Reqwest(o,fn)};reqwest.ajaxSetup=function(options){options=options||{};for(var k in options){globalSetupOptions[k]=options[k]}};return reqwest})},{}]},{},[])("./index.js")});